<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>401(k) Compliance Intake Form</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .questionnaire-header {
            background: linear-gradient(135deg, #1e40af 0%, #3730a3 100%);
            color: white;
            padding: 32px;
            border-radius: 16px;
            margin-bottom: 24px;
            text-align: center;
        }
        
        .questionnaire-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .questionnaire-subtitle {
            font-size: 16px;
            opacity: 0.9;
            font-style: italic;
        }
        
        .progress-bar {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .progress-text {
            font-weight: 600;
            color: #374151;
        }
        
        .progress-percentage {
            font-size: 14px;
            color: #6b7280;
        }
        
        .progress-track {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            transition: width 0.3s ease;
            width: 16%;
        }
        
        .section-nav {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            overflow-x: auto;
            padding-bottom: 8px;
        }
        
        .section-tab {
            padding: 12px 20px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            white-space: nowrap;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 180px;
            justify-content: center;
        }
        
        .section-tab:hover {
            border-color: #d1d5db;
            background: #f9fafb;
        }
        
        .section-tab.active {
            border-color: #3b82f6;
            background: #eff6ff;
            color: #1d4ed8;
        }
        
        .section-tab.completed {
            border-color: #10b981;
            background: #d1fae5;
            color: #065f46;
        }
        
        .section-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
            display: none;
        }
        
        .section-content.active {
            display: block;
        }
        
        .section-header {
            background: #f8fafc;
            padding: 24px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-description {
            color: #6b7280;
            font-size: 14px;
        }
        
        .form-content {
            padding: 24px;
        }
        
        .question-group {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .question-group:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .question-title {
            font-size: 16px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }
        
        .required-indicator {
            color: #ef4444;
            font-size: 14px;
        }
        
        .question-help {
            font-size: 13px;
            color: #6b7280;
            margin-bottom: 16px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 6px;
            border-left: 3px solid #3b82f6;
        }
        
        .form-input, .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .form-textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }
        
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .radio-option {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .radio-option:hover {
            border-color: #d1d5db;
            background: #f9fafb;
        }
        
        .radio-option.selected {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .radio {
            width: 18px;
            height: 18px;
            margin-top: 2px;
        }
        
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .checkbox-option {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        .checkbox-option:hover {
            border-color: #d1d5db;
            background: #f9fafb;
        }
        
        .checkbox-option.selected {
            border-color: #10b981;
            background: #ecfdf5;
        }
        
        .checkbox {
            width: 18px;
            height: 18px;
            margin-top: 2px;
        }
        
        .input-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .input-with-label {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .input-label {
            font-size: 13px;
            font-weight: 500;
            color: #374151;
        }
        
        .alert {
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .alert-info {
            background: #eff6ff;
            border: 2px solid #bfdbfe;
            color: #1e40af;
        }
        
        .alert-warning {
            background: #fffbeb;
            border: 2px solid #fed7aa;
            color: #92400e;
        }
        
        .alert-success {
            background: #ecfdf5;
            border: 2px solid #a7f3d0;
            color: #065f46;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid #e5e7eb;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
        }
        
        .btn-secondary {
            background: white;
            color: #6b7280;
            border: 2px solid #e5e7eb;
        }
        
        .btn-secondary:hover {
            border-color: #d1d5db;
            background: #f9fafb;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .completion-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #059669;
        }
        
        .dependent-questions {
            margin-left: 24px;
            margin-top: 16px;
            padding-left: 16px;
            border-left: 2px solid #e5e7eb;
            display: none;
        }
        
        .dependent-questions.show {
            display: block;
        }
        
        .form-input.error,
        .radio-option.error,
        .checkbox-option.error {
            border-color: #ef4444 !important;
            background-color: #fef2f2 !important;
        }
        
        .table-container {
            overflow-x: auto;
            margin-top: 16px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
        }
        
        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border: 1px solid #e5e7eb;
        }
        
        .data-table th {
            background: #f8fafc;
            font-weight: 600;
            font-size: 13px;
        }
        
        .data-table input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 13px;
        }
        
        .add-row-btn {
            margin-top: 12px;
            padding: 8px 16px;
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            color: #374151;
        }
        
        .add-row-btn:hover {
            background: #e5e7eb;
        }
        
        .summary-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .summary-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            margin-bottom: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="questionnaire-header">
            <h1 class="questionnaire-title">401(k) Compliance Intake Form</h1>
            <p class="questionnaire-subtitle">"Help us accurately test your plan for compliance and prepare your Form 5500 filings."</p>
        </div>

        <div class="progress-bar">
            <div class="progress-header">
                <span class="progress-text">Questionnaire Progress</span>
                <span class="progress-percentage">1 of 6 sections completed (16%)</span>
            </div>
            <div class="progress-track">
                <div class="progress-fill"></div>
            </div>
        </div>

        <div class="section-nav">
            <div class="section-tab active" onclick="showSection(0)">
                <span>🏢</span>
                Business & Ownership
            </div>
            <div class="section-tab" onclick="showSection(1)">
                <span>👥</span>
                Employee Demographics
            </div>
            <div class="section-tab" onclick="showSection(2)">
                <span>💰</span>
                Compensation & Contributions
            </div>
            <div class="section-tab" onclick="showSection(3)">
                <span>⚙️</span>
                Plan Design & Testing
            </div>
            <div class="section-tab" onclick="showSection(4)">
                <span>📋</span>
                Plan Operations & Changes
            </div>
            <div class="section-tab" onclick="showSection(5)">
                <span>📊</span>
                Financial Data & Form 5500
            </div>
        </div>

        <!-- Section 0: Business & Ownership -->
        <div class="section-content active" id="section-0">
            <div class="section-header">
                <h2 class="section-title">
                    🏢 Business & Ownership
                </h2>
                <p class="section-description">Determine controlled group status and related company relationships that affect compliance testing</p>
            </div>

            <div class="form-content">
                <div class="question-group">
                    <h3 class="question-title">
                        Do you own or have ownership interest in any other business?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Ownership interests determine controlled group status, which affects which employees must be included in compliance testing.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('leased-employees', true)">
                            <input type="radio" name="leased-employees" value="yes" class="radio" data-required="true">
                            <span>Yes</span>
                        </label>
                    </div>

                    <div class="dependent-questions" id="leased-employees">
                        <div class="input-group">
                            <div class="input-with-label">
                                <label class="input-label">Are they eligible for the plan?</label>
                                <div class="radio-group">
                                    <label class="radio-option" onclick="selectRadio(this)">
                                        <input type="radio" name="leased-eligible" value="yes" class="radio">
                                        <span>Yes</span>
                                    </label>
                                    <label class="radio-option" onclick="selectRadio(this)">
                                        <input type="radio" name="leased-eligible" value="no" class="radio">
                                        <span>No</span>
                                    </label>
                                </div>
                            </div>
                            <div class="input-with-label">
                                <label class="input-label">Number of Leased Employees</label>
                                <input type="number" class="form-input" min="0" placeholder="5">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Do any employees work fewer than 1,000 hours per year?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Part-time employees may be excluded from the plan, but this affects participant counts and testing.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('part-time', false)">
                            <input type="radio" name="part-time" value="no" class="radio" data-required="true">
                            <span>No</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('part-time', true)">
                            <input type="radio" name="part-time" value="yes" class="radio" data-required="true" checked>
                            <span>Yes</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="part-time">
                        <div class="input-group">
                            <div class="input-with-label">
                                <label class="input-label">Do you exclude them from the plan?</label>
                                <div class="radio-group">
                                    <label class="radio-option selected" onclick="selectRadio(this)">
                                        <input type="radio" name="exclude-part-time" value="yes" class="radio" checked>
                                        <span>Yes</span>
                                    </label>
                                    <label class="radio-option" onclick="selectRadio(this)">
                                        <input type="radio" name="exclude-part-time" value="no" class="radio">
                                        <span>No</span>
                                    </label>
                                </div>
                            </div>
                            <div class="input-with-label">
                                <label class="input-label">Number of Part-Time Employees</label>
                                <input type="number" class="form-input" min="0" placeholder="12">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="prevSection()">
                        ← Previous: Business & Ownership
                    </button>
                    <div class="completion-status">
                        <span>✓</span>
                        Section Complete
                    </div>
                    <button class="btn btn-primary" onclick="nextSection()">
                        Next: Compensation & Contributions →
                    </button>
                </div>
            </div>
        </div>

        <!-- Section 2: Compensation & Contributions -->
        <div class="section-content" id="section-2">
            <div class="section-header">
                <h2 class="section-title">
                    💰 Compensation & Contributions
                </h2>
                <p class="section-description">Define contribution formulas, compensation definitions, and benefit structures</p>
            </div>

            <div class="form-content">
                <div class="question-group">
                    <h3 class="question-title">
                        Which types of employer contributions do you make?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Different contribution types have different testing requirements and vesting rules.
                    </div>
                    <div class="checkbox-group">
                        <label class="checkbox-option selected" onclick="toggleCheckbox(this); toggleDependent('matching-formula', true)">
                            <input type="checkbox" name="contribution-types" value="matching" class="checkbox" checked>
                            <span>Matching contributions</span>
                        </label>
                        <label class="checkbox-option" onclick="toggleCheckbox(this); toggleDependent('profit-sharing-formula', false)">
                            <input type="checkbox" name="contribution-types" value="profit-sharing" class="checkbox">
                            <span>Profit sharing contributions</span>
                        </label>
                        <label class="checkbox-option" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="contribution-types" value="none" class="checkbox">
                            <span>None - employee contributions only</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="matching-formula">
                        <h4 class="question-title" style="margin-top: 24px;">
                            Matching Formula Configuration:
                        </h4>
                        <div class="radio-group">
                            <label class="radio-option selected" onclick="selectRadio(this)">
                                <input type="radio" name="match-type" value="discretionary" class="radio" checked>
                                <span>Discretionary matching (varies by year)</span>
                            </label>
                            <label class="radio-option" onclick="selectRadio(this)">
                                <input type="radio" name="match-type" value="fixed" class="radio">
                                <span>Fixed formula matching</span>
                            </label>
                            <label class="radio-option" onclick="selectRadio(this)">
                                <input type="radio" name="match-type" value="tiered" class="radio">
                                <span>Tiered by employee group</span>
                            </label>
                        </div>

                        <div class="input-group" style="margin-top: 16px;">
                            <div class="input-with-label">
                                <label class="input-label">Match Percentage</label>
                                <input type="number" class="form-input" min="0" max="100" step="0.1" value="100" onchange="updateMatchFormula()">
                            </div>
                            <div class="input-with-label">
                                <label class="input-label">Up to % of Compensation</label>
                                <input type="number" class="form-input" min="0" max="100" step="0.1" value="4" onchange="updateMatchFormula()">
                            </div>
                        </div>

                        <div class="alert alert-info" style="margin-top: 16px;">
                            <span>💡</span>
                            <div id="match-formula-display">Current Formula: 100% match on first 4% of compensation contributed</div>
                        </div>
                    </div>

                    <div class="dependent-questions" id="profit-sharing-formula">
                        <h4 class="question-title" style="margin-top: 24px;">
                            Profit Sharing Formula:
                        </h4>
                        <div class="input-group">
                            <div class="input-with-label">
                                <label class="input-label">Allocation Method</label>
                                <select class="form-select">
                                    <option>Pro-rata by compensation</option>
                                    <option>Uniform percentage</option>
                                    <option>Integrated with Social Security</option>
                                    <option>Cross-tested (age-weighted)</option>
                                </select>
                            </div>
                            <div class="input-with-label">
                                <label class="input-label">Target Contribution %</label>
                                <input type="number" class="form-input" min="0" max="25" step="0.1" placeholder="3.0">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Are there eligibility or vesting conditions tied to employer contributions?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Eligibility and vesting conditions affect when employees receive contributions and can impact testing.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('contribution-conditions', false)">
                            <input type="radio" name="contribution-conditions" value="no" class="radio" data-required="true">
                            <span>No - same as plan eligibility</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('contribution-conditions', true)">
                            <input type="radio" name="contribution-conditions" value="yes" class="radio" data-required="true" checked>
                            <span>Yes - additional requirements apply</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="contribution-conditions">
                        <div class="checkbox-group">
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="conditions" value="service-requirement" class="checkbox">
                                <span>1-year service requirement</span>
                            </label>
                            <label class="checkbox-option selected" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="conditions" value="hours-requirement" class="checkbox" checked>
                                <span>1,000-hour rule</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="conditions" value="last-day-requirement" class="checkbox">
                                <span>Last day of plan year employment</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="conditions" value="minimum-hours" class="checkbox">
                                <span>Minimum hours per pay period</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Are different benefits available to different employee groups?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Different benefit structures may require separate testing or additional compliance requirements.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('benefit-groups', false)">
                            <input type="radio" name="benefit-groups" value="no" class="radio" data-required="true" checked>
                            <span>No - uniform benefits for all eligible employees</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('benefit-groups', true)">
                            <input type="radio" name="benefit-groups" value="yes" class="radio" data-required="true">
                            <span>Yes - different groups have different benefits</span>
                        </label>
                    </div>

                    <div class="dependent-questions" id="benefit-groups">
                        <div class="input-with-label">
                            <label class="input-label">Describe which groups and differences:</label>
                            <textarea class="form-textarea" placeholder="Example: Union employees have 6% match, non-union have 4% match. Executives have additional profit sharing..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Do you include bonuses or other special pay in plan compensation?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Compensation definition affects contribution calculations and must be consistently applied.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('special-compensation', false)">
                            <input type="radio" name="special-compensation" value="no" class="radio" data-required="true">
                            <span>No - base salary/wages only</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('special-compensation', true)">
                            <input type="radio" name="special-compensation" value="yes" class="radio" data-required="true" checked>
                            <span>Yes - additional compensation included</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="special-compensation">
                        <div class="checkbox-group">
                            <label class="checkbox-option selected" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="comp-types" value="bonuses" class="checkbox" checked>
                                <span>Bonuses</span>
                            </label>
                            <label class="checkbox-option selected" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="comp-types" value="commissions" class="checkbox" checked>
                                <span>Commissions</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="comp-types" value="overtime" class="checkbox">
                                <span>Overtime pay</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="comp-types" value="fringe-benefits" class="checkbox">
                                <span>Fringe benefits</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="comp-types" value="relocation" class="checkbox">
                                <span>Relocation payments</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="prevSection()">
                        ← Previous: Employee Demographics
                    </button>
                    <div class="completion-status">
                        <span>✓</span>
                        Section Complete
                    </div>
                    <button class="btn btn-primary" onclick="nextSection()">
                        Next: Plan Design & Testing →
                    </button>
                </div>
            </div>
        </div>

        <!-- Section 3: Plan Design & Testing -->
        <div class="section-content" id="section-3">
            <div class="section-header">
                <h2 class="section-title">
                    ⚙️ Plan Design & Testing
                </h2>
                <p class="section-description">Configure testing methods, safe harbor elections, and auto-enrollment features</p>
            </div>

            <div class="form-content">
                <div class="question-group">
                    <h3 class="question-title">
                        Is this plan designed as a Safe Harbor 401(k)?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Safe Harbor plans are exempt from ADP/ACP testing but must meet specific contribution and notice requirements.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('safe-harbor-config', false)">
                            <input type="radio" name="safe-harbor" value="no" class="radio" data-required="true">
                            <span>No - traditional 401(k) plan</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('safe-harbor-config', true)">
                            <input type="radio" name="safe-harbor" value="basic-match" class="radio" data-required="true" checked>
                            <span>Yes - Safe Harbor with basic matching</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('safe-harbor-config', true)">
                            <input type="radio" name="safe-harbor" value="enhanced-match" class="radio" data-required="true">
                            <span>Yes - Safe Harbor with enhanced matching</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('safe-harbor-config', true)">
                            <input type="radio" name="safe-harbor" value="nonelective" class="radio" data-required="true">
                            <span>Yes - Safe Harbor nonelective contribution</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="safe-harbor-config">
                        <div class="alert alert-success">
                            <span>✅</span>
                            <div>
                                <strong>Safe Harbor Benefits:</strong><br/>
                                Exempt from ADP/ACP testing, higher contribution limits for HCEs, and no corrective distributions required.
                            </div>
                        </div>

                        <h4 class="question-title" style="margin-top: 24px;">
                            Safe Harbor Contribution Details:
                        </h4>
                        <div class="input-group">
                            <div class="input-with-label">
                                <label class="input-label">Safe Harbor Match Rate</label>
                                <input type="number" class="form-input" min="0" max="100" step="0.1" value="100" placeholder="100">
                                <span style="font-size: 12px; color: #6b7280;">Minimum 100% on first 3% + 50% on next 2%</span>
                            </div>
                            <div class="input-with-label">
                                <label class="input-label">Vesting Schedule</label>
                                <select class="form-select">
                                    <option>Immediate (100%)</option>
                                    <option>2-year cliff</option>
                                    <option>6-year graded</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Testing Method Elections (for non-Safe Harbor plans):
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Testing method elections determine how compliance is calculated and cannot be changed mid-year without IRS consent.
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">ADP Testing Method</label>
                            <select class="form-select">
                                <option>Prior Year Testing</option>
                                <option>Current Year Testing</option>
                            </select>
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">ACP Testing Method</label>
                            <select class="form-select">
                                <option>Prior Year Testing</option>
                                <option>Current Year Testing</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-with-label">
                        <label class="input-label">Compensation Definition for Testing</label>
                        <select class="form-select">
                            <option>IRC Section 414(s) - W-2 wages</option>
                            <option>IRC Section 415(c)(3) - includes deferrals and benefits</option>
                        </select>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Does the plan include automatic enrollment or auto-escalation?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Auto-enrollment features affect participant notices, testing requirements, and Form 5500 reporting.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('auto-enrollment-config', false)">
                            <input type="radio" name="auto-enrollment" value="no" class="radio" data-required="true">
                            <span>No automatic enrollment</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('auto-enrollment-config', true)">
                            <input type="radio" name="auto-enrollment" value="eaca" class="radio" data-required="true">
                            <span>EACA (Eligible Automatic Contribution Arrangement)</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('auto-enrollment-config', true)">
                            <input type="radio" name="auto-enrollment" value="qaca" class="radio" data-required="true" checked>
                            <span>QACA (Qualified Automatic Contribution Arrangement)</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="auto-enrollment-config">
                        <h4 class="question-title" style="margin-top: 24px;">
                            Auto-Enrollment Configuration:
                        </h4>
                        <div class="input-group">
                            <div class="input-with-label">
                                <label class="input-label">Year 1 Default Rate</label>
                                <input type="number" class="form-input" min="3" max="15" step="0.1" value="3">
                                <span style="font-size: 12px; color: #6b7280;">Minimum 3% for QACA</span>
                            </div>
                            <div class="input-with-label">
                                <label class="input-label">Year 2 Default Rate</label>
                                <input type="number" class="form-input" min="3" max="15" step="0.1" value="4">
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="input-with-label">
                                <label class="input-label">Year 3 Default Rate</label>
                                <input type="number" class="form-input" min="3" max="15" step="0.1" value="5">
                            </div>
                            <div class="input-with-label">
                                <label class="input-label">Year 4+ Default Rate</label>
                                <input type="number" class="form-input" min="6" max="15" step="0.1" value="6">
                                <span style="font-size: 12px; color: #6b7280;">Minimum 6% for QACA</span>
                            </div>
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Default Investment (QDIA)</label>
                            <select class="form-select">
                                <option>Target Date Fund</option>
                                <option>Balanced Fund</option>
                                <option>Stable Value Fund</option>
                                <option>Money Market Fund</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Vesting Schedule for Employer Contributions:
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Vesting schedules affect forfeitures and must comply with minimum vesting requirements.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('vesting-schedule', false)">
                            <input type="radio" name="vesting-type" value="immediate" class="radio" data-required="true">
                            <span>Immediate (100% vesting)</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('vesting-schedule', true)">
                            <input type="radio" name="vesting-type" value="graded" class="radio" data-required="true" checked>
                            <span>Graded vesting schedule</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('vesting-schedule', false)">
                            <input type="radio" name="vesting-type" value="cliff" class="radio" data-required="true">
                            <span>Cliff vesting</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="vesting-schedule">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Years of Service</th>
                                        <th>Vested Percentage</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Less than 2 years</td>
                                        <td><input type="number" min="0" max="100" value="0">%</td>
                                    </tr>
                                    <tr>
                                        <td>2 years</td>
                                        <td><input type="number" min="0" max="100" value="20">%</td>
                                    </tr>
                                    <tr>
                                        <td>3 years</td>
                                        <td><input type="number" min="0" max="100" value="40">%</td>
                                    </tr>
                                    <tr>
                                        <td>4 years</td>
                                        <td><input type="number" min="0" max="100" value="60">%</td>
                                    </tr>
                                    <tr>
                                        <td>5 years</td>
                                        <td><input type="number" min="0" max="100" value="80">%</td>
                                    </tr>
                                    <tr>
                                        <td>6+ years</td>
                                        <td><input type="number" min="0" max="100" value="100">%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4 class="question-title" style="margin-top: 24px;">
                            How are forfeitures handled?
                        </h4>
                        <div class="radio-group">
                            <label class="radio-option selected" onclick="selectRadio(this)">
                                <input type="radio" name="forfeitures" value="reduce-contributions" class="radio" checked>
                                <span>Used to reduce employer contributions</span>
                            </label>
                            <label class="radio-option" onclick="selectRadio(this)">
                                <input type="radio" name="forfeitures" value="allocate-participants" class="radio">
                                <span>Allocated to remaining participant accounts</span>
                            </label>
                            <label class="radio-option" onclick="selectRadio(this)">
                                <input type="radio" name="forfeitures" value="administrative-expenses" class="radio">
                                <span>Used to pay plan administrative expenses</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="prevSection()">
                        ← Previous: Compensation & Contributions
                    </button>
                    <div class="completion-status">
                        <span>✓</span>
                        Section Complete
                    </div>
                    <button class="btn btn-primary" onclick="nextSection()">
                        Next: Plan Operations & Changes →
                    </button>
                </div>
            </div>
        </div>

        <!-- Section 4: Plan Operations & Changes -->
        <div class="section-content" id="section-4">
            <div class="section-header">
                <h2 class="section-title">
                    📋 Plan Operations & Changes
                </h2>
                <p class="section-description">Document plan amendments, loans, distributions, and operational events during the year</p>
            </div>

            <div class="form-content">
                <div class="question-group">
                    <h3 class="question-title">
                        Were there any plan amendments this year?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Plan amendments can affect testing calculations, participant rights, and Form 5500 reporting.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('amendments', false)">
                            <input type="radio" name="plan-amendments" value="no" class="radio" data-required="true" checked>
                            <span>No plan amendments</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('amendments', true)">
                            <input type="radio" name="plan-amendments" value="yes" class="radio" data-required="true">
                            <span>Yes, there were plan amendments</span>
                        </label>
                    </div>

                    <div class="dependent-questions" id="amendments">
                        <h4 class="question-title" style="margin-top: 24px;">
                            Amendment Details:
                        </h4>
                        <div class="checkbox-group">
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="amendment-types" value="contribution-limits" class="checkbox">
                                <span>Contribution limit changes</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="amendment-types" value="matching-formula" class="checkbox">
                                <span>Matching formula modifications</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="amendment-types" value="eligibility-changes" class="checkbox">
                                <span>Eligibility requirement changes</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="amendment-types" value="vesting-changes" class="checkbox">
                                <span>Vesting schedule modifications</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="amendment-types" value="safe-harbor" class="checkbox">
                                <span>Safe Harbor election changes</span>
                            </label>
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Amendment effective date and description:</label>
                            <textarea class="form-textarea" placeholder="Describe the amendment and its effective date..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Participant loans and hardship distributions:
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Loan and hardship activity must be reported on Form 5500 and affects plan asset calculations.
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Number of Active Loans (End of Year)</label>
                            <input type="number" class="form-input" min="0" value="23">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Total Outstanding Loan Balance</label>
                            <input type="text" class="form-input" placeholder="$0" value="$185,750">
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Number of Hardship Distributions</label>
                            <input type="number" class="form-input" min="0" value="8">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Total Hardship Distribution Amount</label>
                            <input type="text" class="form-input" placeholder="$0" value="$45,200">
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Did you process any distributions for terminated participants this year?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Distributions affect participant counts, plan assets, and Form 5500 reporting requirements.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('distributions', false)">
                            <input type="radio" name="distributions" value="no" class="radio" data-required="true">
                            <span>No</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('distributions', true)">
                            <input type="radio" name="distributions" value="yes" class="radio" data-required="true" checked>
                            <span>Yes</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="distributions">
                        <div class="input-group">
                            <div class="input-with-label">
                                <label class="input-label">Number of Termination Distributions</label>
                                <input type="number" class="form-input" min="0" value="12">
                            </div>
                            <div class="input-with-label">
                                <label class="input-label">Total Distribution Amount</label>
                                <input type="text" class="form-input" placeholder="$0" value="$325,800">
                            </div>
                        </div>
                        <div class="checkbox-group">
                            <label class="checkbox-option selected" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="distribution-types" value="lump-sum" class="checkbox" checked>
                                <span>Lump sum distributions</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="distribution-types" value="installments" class="checkbox">
                                <span>Installment payments</span>
                            </label>
                            <label class="checkbox-option selected" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="distribution-types" value="rollovers" class="checkbox" checked>
                                <span>Direct rollovers to other plans/IRAs</span>
                            </label>
                            <label class="checkbox-option" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="distribution-types" value="rmd" class="checkbox">
                                <span>Required minimum distributions</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Plan administration and fiduciary information:
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        This information is required for Form 5500 and identifies key plan fiduciaries.
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Plan Administrator Name</label>
                            <input type="text" class="form-input" placeholder="John Smith" value="Sarah Johnson">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Title</label>
                            <input type="text" class="form-input" placeholder="CFO" value="Chief Financial Officer">
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Phone Number</label>
                            <input type="tel" class="form-input" placeholder="(555) 123-4567" value="(813) 555-0123">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Email Address</label>
                            <input type="email" class="form-input" placeholder="admin@company.com" value="sjohnson@company.com">
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Did you pay more than $5,000 to any service provider this year?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Service provider fees above $5,000 must be disclosed on Form 5500 Schedule C.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('service-providers', false)">
                            <input type="radio" name="service-providers" value="no" class="radio" data-required="true">
                            <span>No</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('service-providers', true)">
                            <input type="radio" name="service-providers" value="yes" class="radio" data-required="true" checked>
                            <span>Yes</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="service-providers">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Provider Name</th>
                                        <th>Services Provided</th>
                                        <th>Annual Fees Paid</th>
                                        <th>EIN</th>
                                    </tr>
                                </thead>
                                <tbody id="providers-table">
                                    <tr>
                                        <td><input type="text" placeholder="ABC Plan Services" value="Retirement Plan Consultants"></td>
                                        <td>
                                            <select class="form-select">
                                                <option>Third Party Administration</option>
                                                <option>Investment Advisory</option>
                                                <option>Recordkeeping</option>
                                                <option>Audit Services</option>
                                                <option>Legal Services</option>
                                                <option>Actuarial Services</option>
                                            </select>
                                        </td>
                                        <td><input type="text" placeholder="$15,000" value="$28,500"></td>
                                        <td><input type="text" placeholder="12-3456789" value="45-6789012"></td>
                                    </tr>
                                </tbody>
                            </table>
                            <button class="add-row-btn" onclick="addProviderRow()">+ Add Another Provider</button>
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="prevSection()">
                        ← Previous: Plan Design & Testing
                    </button>
                    <div class="completion-status">
                        <span>✓</span>
                        Section Complete
                    </div>
                    <button class="btn btn-primary" onclick="nextSection()">
                        Next: Financial Data & Form 5500 →
                    </button>
                </div>
            </div>
        </div>

        <!-- Section 5: Financial Data & Form 5500 -->
        <div class="section-content" id="section-5">
            <div class="section-header">
                <h2 class="section-title">
                    📊 Financial Data & Form 5500
                </h2>
                <p class="section-description">Provide financial information and participant data required for Form 5500 preparation</p>
            </div>

            <div class="form-content">
                <div class="alert alert-info">
                    <span>📊</span>
                    <div>
                        <strong>Form 5500 Financial Requirements</strong><br/>
                        This data is required for Form 5500 preparation and determines audit requirements and filing deadlines.
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Plan Asset Values
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Asset values determine whether the plan requires an audit (100+ participants with $25M+ assets) and affect per-participant fee calculations.
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Plan Assets - Beginning of Year</label>
                            <input type="text" class="form-input" placeholder="$0" value="$8,450,000" data-required="true">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Plan Assets - End of Year</label>
                            <input type="text" class="form-input" placeholder="$0" value="$9,125,000" data-required="true">
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Contributions and Distributions
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        These amounts are reported on Form 5500 and must reconcile with plan asset changes.
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Total Employee Contributions</label>
                            <input type="text" class="form-input" placeholder="$0" value="$485,600" data-required="true">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Total Employer Contributions</label>
                            <input type="text" class="form-input" placeholder="$0" value="$142,300" data-required="true">
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Total Distributions</label>
                            <input type="text" class="form-input" placeholder="$0" value="$325,800" data-required="true">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Investment Earnings (Net)</label>
                            <input type="text" class="form-input" placeholder="$0" value="$573,200" data-required="true">
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Participant Count Information
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Participant counts determine filing requirements, audit thresholds, and PBGC premiums.
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Active Participants (End of Year)</label>
                            <input type="number" class="form-input" min="0" value="156" data-required="true" name="active-participants" onchange="updateParticipantTotal()">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Inactive Participants with Account Balances</label>
                            <input type="number" class="form-input" min="0" value="23" data-required="true" name="inactive-participants" onchange="updateParticipantTotal()">
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Total Participants with Account Balances</label>
                            <input type="number" class="form-input" min="0" value="179" readonly style="background: #f8fafc;" name="total-participants">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Participants Who Separated During Year</label>
                            <input type="number" class="form-input" min="0" value="12">
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Plan Status and Termination
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Plan termination status affects filing requirements and triggers special distribution and compliance rules.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option selected" onclick="selectRadio(this)">
                            <input type="radio" name="plan-status" value="ongoing" class="radio" data-required="true" checked>
                            <span>Plan is ongoing</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this)">
                            <input type="radio" name="plan-status" value="terminated" class="radio" data-required="true">
                            <span>Plan terminated during the year</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this)">
                            <input type="radio" name="plan-status" value="final-return" class="radio" data-required="true">
                            <span>Final return (plan termination complete)</span>
                        </label>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Additional Plan Information
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Additional details required for accurate Form 5500 completion.
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Plan Year End Date</label>
                            <input type="date" class="form-input" value="2024-12-31" data-required="true">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Employer EIN</label>
                            <input type="text" class="form-input" placeholder="12-3456789" value="65-4321098" data-required="true">
                        </div>
                    </div>
                    <div class="input-group">
                        <div class="input-with-label">
                            <label class="input-label">Plan Number</label>
                            <input type="text" class="form-input" placeholder="001" value="001" data-required="true">
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">ERISA Plan Status</label>
                            <select class="form-select" data-required="true">
                                <option>Large Plan (100+ participants)</option>
                                <option>Small Plan (under 100 participants)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-title">Filing Summary</div>
                    <div class="summary-item">
                        <span>Plan Type:</span>
                        <span>Large Plan (100+ participants)</span>
                    </div>
                    <div class="summary-item">
                        <span>Audit Required:</span>
                        <span>Yes</span>
                    </div>
                    <div class="summary-item">
                        <span>Form 5500 Due Date:</span>
                        <span>October 15, 2025 (with extension)</span>
                    </div>
                    <div class="summary-item">
                        <span>Estimated Filing Fee:</span>
                        <span>$750</span>
                    </div>
                </div>

                <div class="alert alert-success">
                    <span>✅</span>
                    <div>
                        <strong>Ready for Processing</strong><br/>
                        All required information has been collected. We can now proceed with compliance testing and Form 5500 preparation.
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" onclick="prevSection()">
                        ← Previous: Plan Operations & Changes
                    </button>
                    <div class="completion-status">
                        <span>✅</span>
                        All Sections Complete
                    </div>
                    <button class="btn btn-primary" onclick="submitForm()">
                        Submit Questionnaire →
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSection = 0;
        const totalSections = 6;

        function showSection(sectionIndex) {
            // Hide all sections
            const sections = document.querySelectorAll('.section-content');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Show target section
            const targetSection = document.getElementById(`section-${sectionIndex}`);
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // Update tab states
            const tabs = document.querySelectorAll('.section-tab');
            tabs.forEach((tab, index) => {
                tab.classList.remove('active');
                if (index === sectionIndex) {
                    tab.classList.add('active');
                }
                // Mark previous sections as completed
                if (index < sectionIndex) {
                    tab.classList.add('completed');
                    tab.querySelector('span').textContent = '✓';
                }
            });

            currentSection = sectionIndex;
            updateProgress();
        }

        function nextSection() {
            if (!validateCurrentSection()) {
                alert('Please complete all required fields before continuing.');
                return;
            }
            if (currentSection < totalSections - 1) {
                showSection(currentSection + 1);
            }
        }

        function prevSection() {
            if (currentSection > 0) {
                showSection(currentSection - 1);
            }
        }

        function updateProgress() {
            const progressPercentage = Math.round(((currentSection + 1) / totalSections) * 100);
            const progressFill = document.querySelector('.progress-fill');
            const progressText = document.querySelector('.progress-percentage');
            
            if (progressFill) {
                progressFill.style.width = progressPercentage + '%';
            }
            if (progressText) {
                progressText.textContent = `${currentSection + 1} of ${totalSections} sections completed (${progressPercentage}%)`;
            }
        }

        function selectRadio(element) {
            const radioGroup = element.closest('.radio-group');
            if (radioGroup) {
                radioGroup.querySelectorAll('.radio-option').forEach(option => {
                    option.classList.remove('selected');
                });
                element.classList.add('selected');
                
                // Update the actual radio button
                const radio = element.querySelector('input[type="radio"]');
                if (radio) {
                    radio.checked = true;
                }
            }
        }

        function toggleCheckbox(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            if (checkbox) {
                checkbox.checked = !checkbox.checked;
                element.classList.toggle('selected', checkbox.checked);
            }
        }

        function toggleDependent(dependentId, show) {
            const dependent = document.getElementById(dependentId);
            if (dependent) {
                if (show) {
                    dependent.classList.add('show');
                } else {
                    dependent.classList.remove('show');
                }
            }
        }

        function validateCurrentSection() {
            const section = document.querySelector(`#section-${currentSection}`);
            const requiredInputs = section.querySelectorAll('[data-required]');
            let valid = true;

            requiredInputs.forEach(input => {
                let isValid = true;
                const name = input.name;

                if (input.type === 'radio') {
                    const group = section.querySelectorAll(`input[name="${name}"]`);
                    isValid = Array.from(group).some(i => i.checked);
                    group.forEach(el => {
                        const label = el.closest('.radio-option');
                        if (label) {
                            label.classList.toggle('error', !isValid);
                        }
                    });
                } else {
                    isValid = input.value.trim() !== '';
                    input.classList.toggle('error', !isValid);
                }

                if (!isValid) valid = false;
            });

            return valid;
        }

        function updateParticipantTotal() {
            const active = parseInt(document.querySelector('[name="active-participants"]').value) || 0;
            const inactive = parseInt(document.querySelector('[name="inactive-participants"]').value) || 0;
            const totalField = document.querySelector('[name="total-participants"]');

            if (totalField) {
                totalField.value = active + inactive;
            }
        }

        function updateMatchFormula() {
            const matchPercentage = document.querySelector('#section-2 input[type="number"]').value || '0';
            const compensationLimit = document.querySelectorAll('#section-2 input[type="number"]')[1].value || '0';
            const formulaDisplay = document.getElementById('match-formula-display');
            
            if (formulaDisplay) {
                formulaDisplay.textContent = `Current Formula: ${matchPercentage}% match on first ${compensationLimit}% of compensation contributed`;
            }
        }

        function addOwnershipRow() {
            const tableBody = document.getElementById('ownership-table');
            const newRow = tableBody.rows[0].cloneNode(true);
            // Clear the inputs in the new row
            newRow.querySelectorAll('input, select').forEach(input => {
                input.value = '';
            });
            tableBody.appendChild(newRow);
        }

        function addOwnerRow() {
            const tableBody = document.getElementById('owners-table');
            const newRow = tableBody.rows[0].cloneNode(true);
            newRow.querySelectorAll('input, select').forEach(input => {
                input.value = '';
            });
            tableBody.appendChild(newRow);
        }

        function addOfficerRow() {
            const tableBody = document.getElementById('officers-table');
            const newRow = tableBody.rows[0].cloneNode(true);
            newRow.querySelectorAll('input, select').forEach(input => {
                input.value = '';
            });
            tableBody.appendChild(newRow);
        }

        function addProviderRow() {
            const tableBody = document.getElementById('providers-table');
            const newRow = tableBody.rows[0].cloneNode(true);
            newRow.querySelectorAll('input, select').forEach(input => {
                input.value = '';
            });
            tableBody.appendChild(newRow);
        }

        function submitForm() {
            if (!validateCurrentSection()) {
                alert('Please complete all required fields before submitting.');
                return;
            }
            alert('✅ Questionnaire submitted successfully!\n\nYour responses will be used for:\n• Compliance testing (ADP/ACP)\n• Form 5500 preparation\n• Plan audit coordination\n• Regulatory filing deadlines\n\nNext steps: Our team will review your responses and contact you within 2 business days.');
        }

        // Initialize the form
        document.addEventListener('DOMContentLoaded', function() {
            showSection(0);
            updateProgress();
        });
    </script>
</body>
</html>('ownership-details', false)">
                            <input type="radio" name="other-business" value="no" class="radio" data-required="true">
                            <span>No</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('ownership-details', true)">
                            <input type="radio" name="other-business" value="yes" class="radio" data-required="true" checked>
                            <span>Yes</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="ownership-details">
                        <h4 class="question-title" style="margin-top: 24px;">
                            List business names and ownership percentages:
                        </h4>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Business Name</th>
                                        <th>EIN</th>
                                        <th>Ownership %</th>
                                        <th>Relationship</th>
                                    </tr>
                                </thead>
                                <tbody id="ownership-table">
                                    <tr>
                                        <td><input type="text" placeholder="ABC Corp"></td>
                                        <td><input type="text" placeholder="12-3456789"></td>
                                        <td><input type="number" min="0" max="100" placeholder="50"></td>
                                        <td>
                                            <select class="form-select">
                                                <option>Parent Company</option>
                                                <option>Subsidiary</option>
                                                <option>Sister Company</option>
                                                <option>Partnership</option>
                                            </select>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <button class="add-row-btn" onclick="addOwnershipRow()">+ Add Another Business</button>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Do you share employees, management, or services with any other company?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Shared employees or services can create affiliated service group relationships affecting compliance testing.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('shared-services', false)">
                            <input type="radio" name="shared-services" value="no" class="radio" data-required="true" checked>
                            <span>No</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('shared-services', true)">
                            <input type="radio" name="shared-services" value="yes" class="radio" data-required="true">
                            <span>Yes</span>
                        </label>
                    </div>

                    <div class="dependent-questions" id="shared-services">
                        <div class="input-with-label">
                            <label class="input-label">Describe the relationship:</label>
                            <textarea class="form-textarea" placeholder="Example: We share IT services with XYZ Corp, or ABC Corp provides management services to us..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Has your company merged with, acquired, or sold any part of the business this year?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Corporate transactions can trigger special compliance testing requirements and affect participant transfers.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('corporate-transaction', false)">
                            <input type="radio" name="corporate-transaction" value="no" class="radio" data-required="true" checked>
                            <span>No</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('corporate-transaction', true)">
                            <input type="radio" name="corporate-transaction" value="yes" class="radio" data-required="true">
                            <span>Yes</span>
                        </label>
                    </div>

                    <div class="dependent-questions" id="corporate-transaction">
                        <div class="input-group">
                            <div class="input-with-label">
                                <label class="input-label">Effective Date</label>
                                <input type="date" class="form-input">
                            </div>
                            <div class="input-with-label">
                                <label class="input-label">Transaction Type</label>
                                <select class="form-select">
                                    <option>Merger</option>
                                    <option>Acquisition</option>
                                    <option>Divestiture</option>
                                    <option>Asset Sale</option>
                                    <option>Spin-off</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-with-label">
                            <label class="input-label">Transaction Details</label>
                            <textarea class="form-textarea" placeholder="Provide details about the transaction, including company names, employee transfers, etc."></textarea>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Is this plan part of a MEP, PEO, or PEP?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Multiple Employer Plans (MEP), Professional Employer Organizations (PEO), and Pooled Employer Plans (PEP) have special reporting requirements.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('multi-employer', false)">
                            <input type="radio" name="multi-employer" value="no" class="radio" data-required="true" checked>
                            <span>No - Single employer plan</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('multi-employer', true)">
                            <input type="radio" name="multi-employer" value="mep" class="radio" data-required="true">
                            <span>MEP (Multiple Employer Plan)</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('multi-employer', true)">
                            <input type="radio" name="multi-employer" value="pep" class="radio" data-required="true">
                            <span>PEP (Pooled Employer Plan)</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('multi-employer', true)">
                            <input type="radio" name="multi-employer" value="peo" class="radio" data-required="true">
                            <span>PEO (Professional Employer Organization)</span>
                        </label>
                    </div>

                    <div class="dependent-questions" id="multi-employer">
                        <div class="input-with-label">
                            <label class="input-label">Lead Employer or Pooled Plan Provider (PPP)</label>
                            <input type="text" class="form-input" placeholder="Company name and EIN">
                        </div>
                    </div>
                </div>

                <div class="navigation-buttons">
                    <button class="btn btn-secondary" disabled>
                        ← Previous
                    </button>
                    <div class="completion-status">
                        <span>✓</span>
                        Section Complete
                    </div>
                    <button class="btn btn-primary" onclick="nextSection()">
                        Next: Employee Demographics →
                    </button>
                </div>
            </div>
        </div>

        <!-- Section 1: Employee Demographics -->
        <div class="section-content" id="section-1">
            <div class="section-header">
                <h2 class="section-title">
                    👥 Employee Demographics
                </h2>
                <p class="section-description">Identify key employees and ownership relationships that affect HCE determination and testing</p>
            </div>

            <div class="form-content">
                <div class="question-group">
                    <h3 class="question-title">
                        Are there any employees who own more than 5% of the business (directly or through family)?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        5% owners are automatically considered Highly Compensated Employees (HCEs) regardless of compensation level.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('key-employees', false)">
                            <input type="radio" name="five-percent-owners" value="no" class="radio" data-required="true" checked>
                            <span>No</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('key-employees', true)">
                            <input type="radio" name="five-percent-owners" value="yes" class="radio" data-required="true">
                            <span>Yes</span>
                        </label>
                    </div>

                    <div class="dependent-questions" id="key-employees">
                        <h4 class="question-title" style="margin-top: 24px;">
                            Identify 5% owners by name or Employee ID and ownership percentage:
                        </h4>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Employee Name/ID</th>
                                        <th>Ownership %</th>
                                        <th>Relationship to Business</th>
                                        <th>Family Attribution</th>
                                    </tr>
                                </thead>
                                <tbody id="owners-table">
                                    <tr>
                                        <td><input type="text" placeholder="John Smith / EMP001"></td>
                                        <td><input type="number" min="5" max="100" placeholder="15"></td>
                                        <td>
                                            <select class="form-select">
                                                <option>Direct Owner</option>
                                                <option>CEO/President</option>
                                                <option>Partner</option>
                                                <option>Family Member</option>
                                            </select>
                                        </td>
                                        <td><input type="text" placeholder="N/A or spouse of owner"></td>
                                    </tr>
                                </tbody>
                            </table>
                            <button class="add-row-btn" onclick="addOwnerRow()">+ Add Another Owner</button>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Are any employees designated as officers, partners, or directors?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Officers and key employees may have special status for compliance testing and top-heavy determinations.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent('officers', false)">
                            <input type="radio" name="officers" value="no" class="radio" data-required="true">
                            <span>No</span>
                        </label>
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('officers', true)">
                            <input type="radio" name="officers" value="yes" class="radio" data-required="true" checked>
                            <span>Yes</span>
                        </label>
                    </div>

                    <div class="dependent-questions show" id="officers">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Employee Name/ID</th>
                                        <th>Title/Role</th>
                                        <th>Annual Compensation</th>
                                        <th>Plan Participant</th>
                                    </tr>
                                </thead>
                                <tbody id="officers-table">
                                    <tr>
                                        <td><input type="text" placeholder="Jane Doe / EMP002"></td>
                                        <td>
                                            <select class="form-select">
                                                <option>CEO</option>
                                                <option>CFO</option>
                                                <option>President</option>
                                                <option>Vice President</option>
                                                <option>Secretary</option>
                                                <option>Director</option>
                                                <option>Partner</option>
                                            </select>
                                        </td>
                                        <td><input type="text" placeholder="$125,000"></td>
                                        <td>
                                            <select class="form-select">
                                                <option>Yes</option>
                                                <option>No</option>
                                                <option>Excluded</option>
                                            </select>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <button class="add-row-btn" onclick="addOfficerRow()">+ Add Another Officer</button>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3 class="question-title">
                        Do you employ leased or shared employees from a staffing agency or PEO?
                        <span class="required-indicator">*</span>
                    </h3>
                    <div class="question-help">
                        Leased employees may need to be included in compliance testing depending on the arrangement.
                    </div>
                    <div class="radio-group">
                        <label class="radio-option selected" onclick="selectRadio(this); toggleDependent('leased-employees', false)">
                            <input type="radio" name="leased-employees" value="no" class="radio" data-required="true" checked>
                            <span>No</span>
                        </label>
                        <label class="radio-option" onclick="selectRadio(this); toggleDependent
                        